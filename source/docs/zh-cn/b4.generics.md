title: æ³›å‹ - Generics
---

> [ğŸ“–](https://doc.rust-lang.org/beta/book/first-edition/generics.html) å½“ä¹¦å†™ä¸€ä¸ªå‡½æ•°æˆ–æ•°æ®ç±»å‹æ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½å¸Œæœ›å…¶å¯¹è‹¥å¹²ç±»å‹çš„æ•°æ®éƒ½èµ·ä½œç”¨ã€‚åœ¨Rustä¸­ï¼Œå¯ä»¥ä½¿ç”¨èŒƒå‹æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚

ğŸ’­ è¿™ä¸€æ¦‚å¿µä¸­ï¼Œå½“éœ€è¦è¿›è¡Œç±»å‹å£°æ˜æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¤§å†™å­—æ¯ï¼ˆæˆ–éµå¾ªCamelCaseçš„æ ‡è¯†ï¼‰æ¥ä»£æ›¿æŸä¸ªå•ä¸€çš„æ•°æ®ç±»å‹ï¼Œå¦‚**ä»£æ›¿xÂ : u8**è€Œä½¿ç”¨**xÂ : T**ã€‚ä½†ä¸ºäº†ä½¿ç¼–è¯‘å™¨çŸ¥æ™“è¿™æ˜¯ä¸€ä¸ªèŒƒå‹ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¹‹å‰å†æ·»åŠ ä¸€ä¸ª`<T>`ä½œä¸ºæç¤ºã€‚

### èŒƒå‹å‡½æ•°

```rust
fn takes_anything<T>(x: T) { // x çš„ç±»å‹ä¸º T, T æ˜¯ä¸€ä¸ªèŒƒå‹ç±»å‹
}

fn takes_two_of_the_same_things<T>(x: T, y: T) { // x ä¸ y ä¸ºç›¸åŒç±»å‹çš„å‚æ•°
}

fn takes_two_things<T, U>(x: T, y: U) { // å¤šä¸ªèŒƒå‹ç±»å‹
}
```

### èŒƒå‹ç»“æ„ä½“

```rust
struct Point<T> {
  x: T,
  y: T,
}

fn main() {
  let point_a = Point { x: 0, y: 0 }; // T æ˜¯ä¸€ä¸ªæ•´å½¢
  let point_b = Point { x: 0.0, y: 0.0 }; // T æ­¤æ—¶æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹
}

// ğŸ” å½“å¯¹ä¸€ä¸ªç»“æ„ä½“æ·»åŠ å®ç°æ—¶ï¼Œç±»å‹å‚æ•°ä¹Ÿè¦è·Ÿéš`impl`å…³é”®å­—è¿›è¡Œå£°æ˜
// impl<T> Point<T> {
```

### èŒƒå‹æšä¸¾

```rust
enum Option<T> {
    Some(T),
    None,
}

enum Result<T, E> {
    Ok(T),
    Err(E),
}
```

> â­ï¸ ä»¥ä¸Šçš„[Option](https://doc.rust-lang.org/std/option/index.html)å’Œ[Result](https://doc.rust-lang.org/std/result/index.html)ç±»å‹æ˜¯å·²ç»è¢«å®šä¹‰åœ¨Rustæ ‡å‡†åº“ä¸­çš„ç‰¹æ®Šç±»å‹ã€‚
  * ä¸€ä¸ª**å¯é€‰å€¼ - Option**è¦ä¹ˆæ˜¯æŸå€¼ - **Some**ï¼Œè¦ä¹ˆæ— å€¼ - **None**
  * ä¸€ä¸ª**ç»“æœå€¼ - Result**å¯ä»¥è¡¨ç¤ºè¦ä¹ˆæˆåŠŸ - **Ok** è¦ä¹ˆå¤±è´¥ - **Err**

 #### Optionçš„ä½¿ç”¨
 
```rust
// 01 - - - - - - - - - - - - - - - - - - - - - -
fn get_id_by_username(username: &str) -> Option<usize> {
    // å¦‚æœåœ¨ç³»ç»Ÿä¸­æœ‰è¯¥ç”¨æˆ·åå¯¹åº”çš„IDï¼Œåˆ™è¿”å›userId
        return Some(userId);
    // å¦åˆ™
        None
}

// ğŸ’­ åœ¨ä¸Šä¾‹ä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ç±»å‹å£°æ˜ä½¿ç”¨Option<usize>è€Œéusize
// è¿”å›å€¼ä¸ºSome(userId)è€ŒéuserId
// elseåˆ†æ”¯è¿”å› None (è¿˜è®°å¾—å—? æœ€åä¸€ä¸ªè¿”å›å€¼ä¸éœ€è¦ä½¿ç”¨returnå…³é”®å­—è¿›è¡Œæ ‡è¯† ;)

// 02 - - - - - - - - - - - - - - - - - - - - - -
struct Task {
    title: String,
    assignee: Option<Person>,
}

// ğŸ’­ æ­¤å¤„æœªä½¿ç”¨assignee: Personï¼Œè€Œæ˜¯ä½¿ç”¨Option<Person>ä½œä¸ºassigneeçš„ç±»å‹ã€‚
// å› ä¸ºä¸€ä¸ªTaskä»»åŠ¡å¯èƒ½æ²¡æœ‰åˆ†é…ç»™ç‰¹å®šçš„æ‰§è¡Œäººã€‚

// - - - - - - - - - - - - - - - - - - - - - - -
// ä¸‹ä¾‹ä¸­çš„å‡½æ•°è¿”å›ä¸€ä¸ªOptionç±»å‹ç»“æœï¼Œ
// å¯¹è¯¥å‡½æ•°çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¨¡å¼åŒ¹é…æ‰§è¡Œç›¸åº”çš„æ“ä½œ

fn main() {
    let username = "anonymous";
    match get_id_by_username(username) {
        None => println!("User not found"),
        Some(i) => println!("User Id: {}", i)
    }
}
```

 #### Resultç±»å‹çš„ä½¿ç”¨
 
> [ğŸ“–](https://doc.rust-lang.org/book/first-edition/error-handling.html) Optionç±»å‹åœ¨Rustçš„ç±»å‹ç³»ç»Ÿä¸­ç”¨æ¥è¡¨ç¤ºå€¼ç¼ºå¤±æ—¶çš„å¯èƒ½æ€§ï¼Œè€ŒResultåˆ™è¡¨ç¤ºå¼‚å¸¸æ—¶çš„å¯èƒ½æ€§ã€‚

```rust
// - - - - - - - - - - - - - - - - - - - - - -
fn get_word_count_from_file(file_name: &str) -> Result<u32, &str> {
  // å¦‚æœåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœªæ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼Œè¿”å›å¼‚å¸¸
    return Err("File can not be found!")
  // å¦åˆ™ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œå­—æ•°ç»Ÿè®¡å¹¶è¿”å›ç»Ÿè®¡å€¼
    // let mut word_count: u32; ....
    Ok(word_count)
}

// ğŸ’­ åœ¨ä¸Šé¢çš„ğŸŒ°ä¸­
// å¼‚å¸¸æƒ…å†µä¸‹å¹¶æ²¡æœ‰è®©ç¨‹åºç›´æ¥å´©æºƒï¼ˆpanic/break)ï¼Œè€Œæ˜¯åœ¨æ–‡ä»¶æ²¡èƒ½æ‰¾åˆ°æ—¶ï¼Œè¿”å›ä¸€ä¸ªå¼‚å¸¸ç±»å‹ - Err(something)
// è‹¥æ— å¼‚å¸¸ï¼Œåˆ™å–å›ç›¸å…³æ•°æ®ï¼Œå¹¶è¿”å›æˆåŠŸç±»å‹ - Ok(data)


// - - - - - - - - - - - - - - - - - - - - - - -
// æˆ‘ä»¬å¯ä»¥å¯¹è¿”å›å€¼ä½¿ç”¨æ¨¡å¼åŒ¹é…ä»¥è¿›è¡Œæ­£ç¡®å¤„ç†
fn main() {
    let mut file_name = "file_a";
    match get_word_count_from_file(file_name) {
        Ok(i) => println!("Word Count: {}", i),
        Err(e) => println!("Error: {}", e)
    }
}
```


> ğŸ” å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ä¼šæ¶‰åŠåˆ°Optionå’ŒResultç±»å‹ã€‚æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹Rustæ–‡æ¡£ä¸­çš„[std::option::Option](https://doc.rust-lang.org/std/option/enum.Option.html)åŠ[std::result::Result](https://doc.rust-lang.org/std/result/enum.Result.html)ã€‚

â­ï¸ æ­¤å¤–ï¼Œæ›´å¤šçš„å…³äºoptionså’Œresultsçš„**å®é™…ä¾‹å­**å¯ä»¥æŸ¥é˜…Rustæ–‡æ¡£ä¸­çš„[Error Handling](https://doc.rust-lang.org/book/first-edition/error-handling.html)ç« èŠ‚ã€‚
