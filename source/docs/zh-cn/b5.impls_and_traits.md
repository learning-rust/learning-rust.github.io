title: å®ç°ä¸ç‰¹æ€§ - Impls & Traits
---

ğŸ’¡ å½“æˆ‘ä»¬è®¨è®º**ç±»Cç»“æ„**æ—¶ï¼Œæ›¾æåˆ°å®ƒä¸é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„**ç±»**å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯**ä¸åŒ…å«ç±»åŠå…¶å®ä¾‹çš„æ–¹æ³•**ã€‚**å®ç°**æ˜¯ç”¨æ¥ä¸ºRustçš„ç»“æ„ä½“å’Œæšä¸¾**å®šä¹‰æ–¹æ³•**çš„æ“ä½œã€‚

ğŸ’¡ **ç‰¹æ€§ - Traits**æ˜¯ä¸€ç±»ä¸é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„æ¥å£æ¯”è¾ƒ**ç±»ä¼¼**çš„æ¦‚å¿µï¼Œä»–ä»¬ç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»å‹å¿…é¡»åŠ ä»¥å®ç°çš„æ–¹æ³•ã€‚ä¸€ä¸ªç±»å‹å¯ä»¥å®ç°å¤šç§ç‰¹æ€§ã€‚

â­ï¸ï¸ ä½†æ˜¯ï¼Œç‰¹æ€§**å¯ä»¥åŒ…å«æ–¹æ³•çš„é»˜è®¤å®ç°**ã€‚è¿™äº›é»˜è®¤å®ç°å¯ä»¥åœ¨ç±»å‹è¿›è¡Œç‰¹æ€§çš„å…·ä½“å®ç°æ—¶åŠ ä»¥è¦†ç›–ã€‚

### æ— ç‰¹å®šç‰¹æ€§çš„å®ç°

```rust
struct Player {
    first_name: String,
    last_name: String,
}

impl Player {
    fn full_name(&self) -> String {
        format!("{} {}", self.first_name, self.last_name)
    }
}

fn main() {
    let player_1 = Player {
        first_name: "Rafael".to_string(),
        last_name: "Nadal".to_string(),
    };

    println!("Player 01: {}", player_1.full_name());
}

// â­ï¸ å®ç°å¿…é¡»å’Œç±»å‹æœ¬èº«åœ¨åŒä¸€ä¸ªcrateåŒ…ä¸­

// ğŸ’¡ æ­¤å¤–ï¼Œåœ¨Rustä¸­ï¼Œå¯ä»¥ä¸ºä»¥å­˜åœ¨çš„æ•°æ®ç±»å‹ï¼Œå¦‚i8ã€f64ç­‰å®ç°æ–°çš„ç‰¹æ€§ã€‚
// åŒæ ·åœ°ï¼Œä¹Ÿå¯å¯¹äºä½ æ–°åˆ›çš„ç±»å‹å®ç°å·²æœ‰çš„ç‰¹æ€§ã€‚
// ä½†æˆ‘ä»¬ä¸èƒ½å¯¹å·²æœ‰ç±»å‹çš„å·²æœ‰ç‰¹æ€§å¢åŠ æ—¢æœ‰å®ç°ã€‚
```

### ç‰¹æ€§ä¸å®ç°ï¼Œä¸åŒ…å«é»˜è®¤æ–¹æ³•

```rust
struct Player {
    first_name: String,
    last_name: String,
}

trait FullName {
    fn full_name(&self) -> String;
}

impl FullName for Player {
    fn full_name(&self) -> String {
        format!("{} {}", self.first_name, self.last_name)
    }
}

fn main() {
    let player_2 = Player {
        first_name: "Roger".to_string(),
        last_name: "Federer".to_string(),
    };

    println!("Player 02: {}", player_2.full_name());
}

// ğŸ” é™¤å‡½æ•°å¤–ï¼Œä¸€ä¸ªç‰¹æ€§ä¹Ÿå¯ä»¥åŒ…å«å¸¸é‡å’Œç±»å‹
```

### å¸¦æœ‰é»˜è®¤æ–¹æ³•çš„å®ç°å’Œç‰¹æ€§

```rust
trait Foo {
    fn bar(&self);
    fn baz(&self) { println!("We called baz."); }
}
```

â­ï¸ å¦‚ä½ æ‰€è§ï¼ŒæŸäº›æ–¹æ³•çš„é¦–ä¸ªå‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªç‰¹å®šçš„å€¼ - å³**ç±»å‹æœ¬èº«**ã€‚å®ƒå¯èƒ½æ˜¯**self, &self, æˆ–&mut self**ä¸­çš„ä¸€ä¸ªï¼šå½“éœ€è¦å–å¾—æ ˆä¸Šçš„å€¼è‡ªèº«æ—¶ï¼Œä½¿ç”¨ *self*ï¼Œæ­¤æ—¶ä¼šå–å¾—å€¼çš„æ‰€æœ‰æƒï¼›å½“å…¶æŒ‡ä»£ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œä½¿ç”¨ *&self*ï¼›å½“å®ƒä½œä¸ºä¸€ä¸ªå¯å˜å¼•ç”¨æ—¶ï¼Œä½¿ç”¨ *&mut self*

### å®ç°å…³è”å‡½æ•°

å…¶ä»–ä¸€äº›è¯­è¨€å¯èƒ½ä¼šæ”¯æŒ**é™æ€æ–¹æ³•**ã€‚é€šè¿‡è¿™ä¸€é€”å¾„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»æœ¬èº«**ç›´æ¥è°ƒç”¨æ–¹æ³•**è€Œæ— éœ€åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ã€‚åœ¨Rustä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º**å…³è”å‡½æ•° - Associated Functions**ã€‚æˆ‘ä»¬ä½¿ç”¨ **::** è€Œä¸æ˜¯.æ¥è°ƒç”¨æŸä¸€ç»“æ„ä½“çš„å…³è”å‡½æ•°ã€‚
ä¾‹å¦‚ï¼š `Person::new(â€œElon Musk Jrâ€);`


```rust
struct Player {
    first_name: String,
    last_name: String,
}

impl Player {
    fn new(first_name: String, last_name: String) -> Player {
        Player {
            first_name : first_name,
            last_name : last_name,
        }
    }

    fn full_name(&self) -> String {
        format!("{} {}", self.first_name, self.last_name)
    }
}

fn main() {
    let player_name = Player::new("Serena".to_string(), "Williams".to_string()).full_name();
    println!("Player: {}", player_name);
}

// æˆ‘ä»¬ä½¿ç”¨äº† :: æ ‡è¯†ç¬¦æ¥è°ƒç”¨ `new()` å¹¶ä½¿ç”¨ . æ ‡è¯†ç¬¦æ¥è°ƒç”¨ `full_name()`

// ğŸ” åŒæ ·åœ¨æ­¤å¤„ï¼Œæˆ‘ä»¬å¯ä»¥å¹¶æ²¡æœ‰å°†new() å’Œ full_name()çš„è°ƒç”¨åˆ†æˆä¸¤ä¸ªè¡¨è¾¾å¼
// è€Œæ˜¯ç›´æ¥ä½¿ç”¨äº†é“¾å¼è°ƒç”¨
```

### ç‰¹æ€§ä¸èŒƒå‹

```rust
trait From<T> {
    fn from(T) -> Self;
}
    impl From<u8> for u16 {
        //...
    }
    impl From<u8> for u32{
        //...
    }
    
// å’ŒèŒƒå‹å‡½æ•°ä¸€æ ·ï¼Œåœ¨traitç‰¹æ€§åç§°åè¦æŒ‡å®šèŒƒå‹
```

### ç‰¹æ€§ç»§æ‰¿

```rust
trait Person {
    fn full_name(&self) -> String;
}

    trait Employee : Person { // Employee ç»§æ‰¿äº† Personç‰¹æ€§
      fn job_title(&self) -> String;
    }

    trait ExpatEmployee : Employee + Expat { // ExpatEmployee ä» Employee ä¸ Expat ç»§æ‰¿ç‰¹æ€§
      fn additional_tax(&self) -> f64;
    }
```

### ç‰¹æ€§å¯¹è±¡ - Trait Objects

ğŸ” Ruståœ¨traité™æ€è°ƒç”¨ä¹‹å¤–ï¼Œä¹Ÿæ”¯æŒä¸€ç§å«åšâ€œç‰¹æ€§å¯¹è±¡â€æœºåˆ¶æ¥åŠ¨æ€çš„è°ƒç”¨traitã€‚

> [ğŸ…†](https://en.wikipedia.org/wiki/Dynamic_dispatch) **åŠ¨æ€è°ƒç”¨ - Dynamic dispatch** æ˜¯æŒ‡ä¸€ç§åœ¨è¿è¡Œæ—¶è¿›è¡ŒåŠ¨æ€é€‰æ‹©æ“ä½œï¼ˆæ–¹æ³•æˆ–å‡½æ•°ï¼‰å¹¶åŠ ä»¥æ‰§è¡Œçš„è¿‡ç¨‹ã€‚


```rust
trait GetSound {
    fn get_sound(&self) -> String;
}

struct Cat {
    sound: String,
}
    impl GetSound for Cat {
        fn get_sound(&self) -> String {
            self.sound.clone()
        }
    }

struct Bell {
    sound: String,
}
    impl GetSound for Bell {
        fn get_sound(&self) -> String {
            self.sound.clone()
        }
    }


fn make_sound<T: GetSound>(t: &T) {
    println!("{}!", t.get_sound())
}

fn main() {
    let kitty = Cat { sound: "Meow".to_string() };
    let the_bell = Bell { sound: "Ding Dong".to_string() };

    make_sound(&kitty); // Meow!
    make_sound(&the_bell); // Ding Dong!
}
```
