<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Rust Programming Language Tutorials for Everyone!">
  <meta name="author" content="Dumindu Madunuwan">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#101010" media="(prefers-color-scheme: dark)">
  <title>Option and Result ¬∑ Learning Rust</title>
  <link rel="canonical" href="https://learning-rust.github.io/docs/option-and-result/">
  <link rel="stylesheet" href="/assets/css/docs.min.8e9408609771a441499aa5571a4585b0ca95783b842d5c758af5eef1457b0fe0.css" integrity="">

  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon/favicon.ico">
  <link rel="icon" href="/favicon/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="icon" href="/favicon/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png" sizes="180x180">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FZHQCXSZ89"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FZHQCXSZ89');
  </script>
</head>

<body>

<div id="outer-wrapper">

  <div id="aside-wrapper">
    <aside>
      <div>
        <button class="btn"><i>‚ùå</i>Close</button>
      </div>

      <a href="https://learning-rust.github.io/" class="site-logo">Learning Rust</a>

      <nav role="navigation">
        <details open>
          <summary>Documentation</summary>
          <ul>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/overview/">Overview</a>
            </li>
            </ul>
        </details>
        <details open>
          <summary>Basics</summary>
          <ul>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/why-rust/">Why Rust?</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/installation/">Installation</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/hello-world/">Hello World</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/cargo-crates-and-basic-project-structure/">Cargo, Crates and Basic Project Structure</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/comments-and-documenting-the-code/">Comments and Documenting the code</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/variable-bindings-constants-and-statics/">Variable bindings, Constants and Statics</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/functions/">Functions</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/primitive-data-types/">Primitive Data Types</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/operators/">Operators</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/control-flows/">Control Flows</a>
            </li>
            </ul>
        </details>
        <details open>
          <summary>Beyond The Basics</summary>
          <ul>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/vectors/">Vectors</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/structs/">Structs</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/enums/">Enums</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/generics/">Generics</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/impls-and-traits/">Impls and Traits</a>
            </li>
            </ul>
        </details>
        <details open>
          <summary>The Tough Part</summary>
          <ul>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/ownership/">Ownership</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/borrowing/">Borrowing</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/lifetimes/">Lifetimes</a>
            </li>
            </ul>
        </details>
        <details open>
          <summary>Let&#39;s Get It Started</summary>
          <ul>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/code-organization/">Code Organization</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/functions-02/">Functions (02)</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/modules/">Modules</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/crates/">Crates</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/workspaces/">Workspaces</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/use/">Use</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/std-primitives-and-preludes/">STD, Primitives and Preludes</a>
            </li>
            </ul>
        </details>
        <details open>
          <summary>Error Handling</summary>
          <ul>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/smart-compiler/">Smart Compiler</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/panicking/">Panicking</a>
            </li>
            <li>
              <a class="active" href="https://learning-rust.github.io/docs/option-and-result/">Option and Result</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/unwrap-and-expect/">Unwrap and Expect</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/error-and-none-propagation/">Error and None Propagation</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/combinators/">Combinators</a>
            </li>
            <li>
              <a class="" href="https://learning-rust.github.io/docs/custom-error-types/">Custom Error Types</a>
            </li>
            </ul>
        </details>
        
      </nav>
    </aside>
  </div>

  <div id="content-wrapper">
    <header>
      <a href="https://learning-rust.github.io/" class="site-logo">Learning Rust</a>
    </header>

    <main>
      <article>
        <nav>
          <button class="btn"><i>‚¨ÖÔ∏è</i> On this section</button>
          <button class="btn">On this page <i>‚û°Ô∏è</i></button>
        </nav>
        <header>
          <h1>Option and Result</h1>
          <p></p>
        </header>
        <div id="article-body">
          <h2 id="why-option-and-result">Why Option and Result?</h2>
<p>Many languages use <strong><code>null</code>\ <code>nil</code>\ <code>undefined</code> types</strong> to represent empty outputs, and <strong><code>Exceptions</code></strong> to handle errors. Rust skips using both, especially to prevent issues like <strong>null pointer exceptions, sensitive data leakages through exceptions</strong>, etc. Instead, Rust provides two special <strong>generic enums</strong>;<code>Option</code> and <code>Result</code> to deal with above cases.</p>
<blockquote>
<p>üí≠ In the previous sections, we have discussed about the basics of <a href="/docs/enums">enums</a>, <a href="/docs/generics">generics</a> and <a href="/docs/generics/#generalizing-enums"><code>Result</code> &amp; <code>Option</code> types</a>.</p></blockquote>
<p>As you know,</p>
<ul>
<li>An <strong>optional value</strong> can have either <strong>Some</strong> value or no value/ <strong>None</strong>.</li>
<li>A <strong>result</strong> can represent either success/ <strong>Ok</strong> or failure/ <strong>Err</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="c1">// An output can have either Some value or no value/ None.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">enum</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// T is a generic and it can contain any type of value.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="n">T</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">None</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// A result can represent either success/ Ok or failure/ Err.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">enum</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// T and E are generics. T can contain any type of value, E can be any error.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">T</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">E</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>üí≠ Also as we discussed in <a href="/docs/std-primitives-and-preludes/#preludes">preludes</a>, not only <code>Option</code> and <code>Result</code>, and also their variants are in preludes. So, we can use them directly without using namespaces in the code.</p>
<h2 id="basic-usages-of-option">Basic usages of Option</h2>
<p>When writing a function or data type,</p>
<ul>
<li>if an <strong>argument</strong> of the function is optional,</li>
<li>if the function is non-void and if the output it <strong>returns</strong> can be empty,</li>
<li>if the value of a <strong>property of the data type</strong> can be empty,</li>
</ul>
<p>we have to use their data type as an <code>Option</code> type.</p>
<p>For example, if the function outputs a <code>&amp;str</code> value and the output can be empty, the return type of the function should be set as <code>Option&lt;&amp;str&gt;</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">fn</span> <span class="nf">get_an_optional_value</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//if the optional value is not empty
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">&#34;Some value&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//else
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="nb">None</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>In the same way, if the value of a property of a data type can be empty or optional like the <code>middle_name</code> of the <code>Name</code> data type in the following example, we should set its data type as an <code>Option</code> type.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Name</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">first_name</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">middle_name</span>: <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="c1">// middle_name can be empty
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="n">last_name</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>üí≠ As you know, we can use pattern matching to catch the relevant return type (<code>Some</code>/ <code>None</code>) via <code>match</code>. There is a function in <strong><code>std::env</code></strong> called <strong><a href="https://doc.rust-lang.org/std/env/fn.home_dir.html"><code>home_dir()</code></a></strong> to get the current user&rsquo;s home directory. However, not all users have a home directory in systems like Linux, so the home directory of a user can be optional. So it returns an <code>Option</code> type; <a href="https://doc.rust-lang.org/std/path/struct.PathBuf.html"><code>Option&lt;PathBuf&gt;</code></a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">env</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">home_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span>::<span class="n">home_dir</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">home_path</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{:?}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">),</span><span class="w"> </span><span class="c1">// This prints &#34;/root&#34;, if you run this in Rust playground
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;Can not find the home directory!&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>‚≠ê However, when using optional arguments with functions, we have to pass <code>None</code> values for empty arguments while calling the function.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">fn</span> <span class="nf">get_full_name</span><span class="p">(</span><span class="n">fname</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="n">lname</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="n">mname</span>: <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">String</span> <span class="p">{</span><span class="w"> </span><span class="c1">// middle name can be empty
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="k">match</span><span class="w"> </span><span class="n">mname</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{}</span><span class="s"> </span><span class="si">{}</span><span class="s"> </span><span class="si">{}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">lname</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{}</span><span class="s"> </span><span class="si">{}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="n">lname</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">get_full_name</span><span class="p">(</span><span class="s">&#34;Galileo&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Galilei&#34;</span><span class="p">,</span><span class="w"> </span><span class="nb">None</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">get_full_name</span><span class="p">(</span><span class="s">&#34;Leonardo&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Vinci&#34;</span><span class="p">,</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">&#34;Da&#34;</span><span class="p">)));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// üí° Better create a struct as Person with fname, lname, mname fields and create a impl function as full_name()
</span></span></span></code></pre></div><p>üîé Other than that, <code>Option</code> types are used with <strong>nullable pointers</strong> in Rust. Because there are <strong>no null pointers in Rust</strong>, the pointer types should point to a valid location. So if a pointer can be nullable, we have use <code>Option&lt;Box&lt;T&gt;&gt;</code>¬†.</p>
<h2 id="basic-usages-of-result">Basic usages of Result</h2>
<p>If a function can produce an error, we have to use a <code>Result</code> type by <strong>combining the data type of the valid output and the data type of the error</strong>. For example, if the data type of the valid output is <code>u64</code> and error type is <code>String</code>, the return type should be <code>Result&lt;u64, String&gt;</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">fn</span> <span class="nf">function_with_error</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//if error happens
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="s">&#34;The error message&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// else, return valid output
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>üí≠ As you know, we can use the pattern matching to catch the relevant return types (<code>Ok</code>/<code>Err</code>) via <code>match</code>. There is a function to fetch the value of any environment variable in <strong><code>std::env</code></strong> called <strong><a href="https://doc.rust-lang.org/std/env/fn.var.html"><code>var()</code></a></strong>. Its input is the environment variable name. This can produce an error if we pass a wrong environment variable or the program cannot extract the value of the environment variable while running. So, its return type is a <code>Result</code> type; <a href="https://doc.rust-lang.org/std/env/enum.VarError.html"><code>Result&lt;String, VarError&gt;</code></a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">env</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;HOME&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">env</span>::<span class="n">var</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">),</span><span class="w"> </span><span class="c1">// This prints &#34;/root&#34;, if you run this in Rust playground
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">),</span><span class="w"> </span><span class="c1">// This prints &#34;environment variable not found&#34;, if you give a nonexistent environment variable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="is_some-is_none-is_ok-is_err">is_some(), is_none(), is_ok(), is_err()</h2>
<p>Other than <code>match</code> expressions, Rust provides <code>is_some()</code> , <code>is_none()</code> and <code>is_ok()</code> , <code>is_err()</code> functions to identify the return type.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span>: <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">&#34;Hello, world!&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">is_some</span><span class="p">(),</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">is_none</span><span class="p">(),</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span>: <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">is_ok</span><span class="p">(),</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">is_err</span><span class="p">(),</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="ok-err-for-result-types">ok(), err() for Result types</h2>
<p>In addition to that, Rust provides <code>ok()</code> and <code>err()</code> for <code>Result</code> types. They convert the <code>Ok&lt;T&gt;</code> and <code>Err&lt;E&gt;</code> values of a <strong><code>Result</code> type to <code>Option</code> types</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">o</span>: <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">e</span>: <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="s">&#34;message&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">ok</span><span class="p">(),</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="mi">8</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ok(v) ok = Some(v)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">ok</span><span class="p">(),</span><span class="w"> </span><span class="nb">None</span><span class="p">);</span><span class="w">    </span><span class="c1">// Err(v) ok = None
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">err</span><span class="p">(),</span><span class="w"> </span><span class="nb">None</span><span class="p">);</span><span class="w">            </span><span class="c1">// Ok(v) err = None
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">err</span><span class="p">(),</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">&#34;message&#34;</span><span class="p">));</span><span class="w"> </span><span class="c1">// Err(v) err = Some(v)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div>
        </div>

        <footer>
          <time datetime="2024-02-01"><i>üïí</i> Updated: 2024-02-01</time>
          <a href="https://learning-rust.github.io/docs/panicking/"><i>Ôπ§</i> Previous</a>
          <a href="https://learning-rust.github.io/docs/unwrap-and-expect/">Next <i>Ôπ•</i></a>
          </footer>
      </article>

      <aside>
        <div>
          <button class="btn"><i>‚ùå</i>Close</button>
        </div>
        <strong>On this page</strong>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#why-option-and-result">Why Option and Result?</a></li>
    <li><a href="#basic-usages-of-option">Basic usages of Option</a></li>
    <li><a href="#basic-usages-of-result">Basic usages of Result</a></li>
    <li><a href="#is_some-is_none-is_ok-is_err">is_some(), is_none(), is_ok(), is_err()</a></li>
    <li><a href="#ok-err-for-result-types">ok(), err() for Result types</a></li>
  </ul>
</nav>
      </aside>
    </main>

    <footer>
      <div><i>üßë‚Äçüíª</i>Built by and copyright<a href="https://github.com/dumindu" target="_blank">Dumindu Madunuwan</a><i>üìÖ</i> 2016-2025<i>üöÄ</i> <a href="https://github.com/learning-rust" target="_blank">GitHub</a></div>
      <div>
        <button class="btn"><i>‚òÄÔ∏è</i><i>‚ÅÑ</i><i>üåë</i></button>
      </div>
    </footer>
  </div>

</div>

<div id="body-model-outer"></div>
<script type="text/javascript" src="/assets/js/docs.min.12ffdc25c0149ef34e761ee54587f2aae17affcb8375298ad2180851930cb142.js" integrity=""></script>
</body>
</html>